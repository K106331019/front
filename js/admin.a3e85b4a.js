(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin"],{1393:function(e,t,r){"use strict";var a=r("23e7"),n=r("857a"),i=r("af03");a({target:"String",proto:!0,forced:i("big")},{big:function(){return n(this,"big","","")}})},"331e":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-table",{staticClass:"mt-5",attrs:{items:e.servers,fields:e.fields,"head-variant":"light"},scopedSlots:e._u([{key:"cell(name)",fn:function(t){return[e._v(" "+e._s(t.item.name)+" ")]}},{key:"cell(phone)",fn:function(t){return[e._v(" "+e._s(t.item.phone)+" ")]}},{key:"cell(message)",fn:function(t){return[e._v(" "+e._s(t.item.message)+" ")]}}])})},n=[],i=r("1da1"),o=(r("96cf"),{data:function(){return{servers:[],fields:[{key:"_id",label:"顧客編號"},{key:"name",label:"顧客姓名"},{key:"phone",label:"連絡電話"},{key:"message",label:"服務內容"}],options:[{value:"true",text:"完成"},{value:"false",text:"未完成"}]}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.get("/servers/all",{headers:{authorization:"Bearer"+e.user.token}});case 3:r=t.sent,a=r.data,e.servers=a.result,console.log(e.servers),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$swal({icon:"error",title:"錯誤",text:"取得資訊失敗"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}),s=o,l=r("2877"),c=Object(l["a"])(s,a,n,!1,null,null,null);t["default"]=c.exports},3530:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin"},[a("img",{staticClass:"admin-logo",attrs:{src:r("a1d8")}}),a("b-row",{staticClass:"d-flex  w-100 p-5"},[a("b-col",{staticClass:"text-left"},[a("h1",[e._v("後台管理系統")])]),a("b-col",{staticClass:"text-right"},[a("b-button",{staticClass:"bg-transparent admin-btn",attrs:{to:"/"}},[a("b-icon",{attrs:{icon:"house","font-scale":"3",variant:"dark"}})],1)],1)],1),a("div",{staticClass:"admin-card"},[a("b-row",{staticClass:"w-100 mx-auto"},[a("b-col",{attrs:{lg:"12"}},[a("b-nav",{staticClass:"admin-title text-secondary",attrs:{tabs:"",fill:""}},[a("b-nav-item",{attrs:{to:"/admin/products",exact:"","exact-active-class":"active"}},[e._v("商品管理")]),a("b-nav-item",{attrs:{to:"/admin/orders",exact:"","exact-active-class":"active"}},[e._v("訂單管理")]),a("b-nav-item",{attrs:{to:"/admin/servers",exact:"","exact-active-class":"active"}},[e._v("客製化服務管理")])],1)],1),a("b-col",{attrs:{lg:"12"}},[a("router-view")],1)],1)],1)],1)},n=[],i={data:function(){return{tabIndex:0}},methods:{linkClass:function(e){return this.tabIndex===e?["bg-primary","text-light"]:["bg-light","text-info"]}}},o=i,s=r("2877"),l=Object(s["a"])(o,a,n,!1,null,null,null);t["default"]=l.exports},"857a":function(e,t,r){var a=r("e330"),n=r("1d80"),i=r("577e"),o=/"/g,s=a("".replace);e.exports=function(e,t,r,a){var l=i(n(e)),c="<"+t;return""!==r&&(c+=" "+r+'="'+s(i(a),o,"&quot;")+'"'),c+">"+l+"</"+t+">"}},a434:function(e,t,r){"use strict";var a=r("23e7"),n=r("da84"),i=r("23cb"),o=r("5926"),s=r("07fa"),l=r("7b0b"),c=r("65f0"),u=r("8418"),d=r("1dde"),f=d("splice"),m=n.TypeError,p=Math.max,b=Math.min,g=9007199254740991,v="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!f},{splice:function(e,t){var r,a,n,d,f,h,x=l(this),y=s(x),k=i(e,y),w=arguments.length;if(0===w?r=a=0:1===w?(r=0,a=y-k):(r=w-2,a=b(p(o(t),0),y-k)),y+r-a>g)throw m(v);for(n=c(x,a),d=0;d<a;d++)f=k+d,f in x&&u(n,d,x[f]);if(n.length=a,r<a){for(d=k;d<y-a;d++)f=d+a,h=d+r,f in x?x[h]=x[f]:delete x[h];for(d=y;d>y-a+r;d--)delete x[d-1]}else if(r>a)for(d=y-a;d>k;d--)f=d+a-1,h=d+r-1,f in x?x[h]=x[f]:delete x[h];for(d=0;d<r;d++)x[d+k]=arguments[d+2];return x.length=y-a+r,n}})},aa93:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"adminProduct"},[r("div",[r("b-row",[r("b-col",[r("b-table",{ref:"table",staticClass:"bg-white mx-auto mt-5 product-table",attrs:{"sticky-header":"","head-variant":"light",items:e.products,fields:e.fields},scopedSlots:e._u([{key:"cell(image)",fn:function(t){return[t.item.image?r("img",{staticClass:"w-50",attrs:{src:t.item.image}}):e._e()]}},{key:"cell(sell)",fn:function(t){return[e._v(" "+e._s(t.item.sell?"v":"")+" ")]}},{key:"cell(category)",fn:function(t){return[t.item.category?r("b-text",[e._v(" "+e._s(t.item.category.big)+" - "+e._s(t.item.category.small))]):e._e()]}},{key:"cell(action)",fn:function(t){return[r("div",{staticClass:"d-flex"},[r("b-button",{on:{click:function(r){return e.editProduct(t.index)}}},[r("b-icon",{attrs:{icon:"pencil"}})],1),r("b-button",{on:{click:function(r){return e.delProduct(t.item._id)}}},[r("b-icon",{attrs:{icon:"trash"}})],1)],1)]}}])})],1)],1),r("b-row",{staticClass:"mt-1"},[r("b-col",{staticClass:"mx-auto",attrs:{lg:"2"}},[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-product",modifiers:{"modal-product":!0}}],staticClass:"addproduct"},[r("b-icon",{attrs:{icon:"plus-circle","font-scale":"5"}})],1),r("b-modal",{attrs:{id:"modal-product",size:"xl",centered:"",title:e.form._id.length>0?"編輯商品":"新增商品","ok-title":"送出","ok-variant":"warning","cancel-title":"重置","cancel-variant":"secondary","ok-disabled":e.modalSubmitting,"cancel-disabled":e.modalSubmitting},on:{ok:e.submitModal,hidden:e.resetForm}},[r("b-row",[r("b-col",{attrs:{cols:"6"}},[r("b-form-group",{attrs:{label:"商品名稱","label-for":"input-name",description:"必填欄位","invalid-feedback":"商品名稱必填",state:e.state.name}},[r("b-form-input",{attrs:{id:"input-name",type:"text",required:"",placeholder:"請輸入商品名稱",state:e.state.name},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),r("b-col",{attrs:{cols:"6"}},[r("b-form-group",{attrs:{label:"商品價格","label-for":"input-price",description:"必填欄位","invalid-feedback":"商品價格必須是0元以上",state:e.state.price}},[r("b-form-input",{attrs:{id:"input-price",type:"number",min:"0",required:"",placeholder:"請輸入商品價格",state:e.state.price},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1)],1),r("b-col",{attrs:{cols:"6"}},[r("b-form-group",{attrs:{label:"商品項目","label-for":"input-category1",description:"必填欄位","invalid-feedback":"商品分類必填"}},[r("b-form-select",{attrs:{id:"input-category1",placeholder:"請輸入商品分類",options:Object.keys(e.categories)},model:{value:e.form.category.big,callback:function(t){e.$set(e.form.category,"big",t)},expression:"form.category.big"}})],1)],1),r("b-col",{attrs:{cols:"6"}},[r("b-form-group",{attrs:{label:"商品分類","label-for":"input-category2",description:"必填欄位","invalid-feedback":"商品分類必填"}},[r("b-form-select",{attrs:{id:"input-category2",options:e.categories[e.form.category.big],placeholder:"請輸入商品分類"},model:{value:e.form.category.small,callback:function(t){e.$set(e.form.category,"small",t)},expression:"form.category.small"}})],1)],1),r("b-col",{attrs:{cols:"12"}},[r("b-form-group",{attrs:{label:"商品說明","label-for":"input-description",description:"必填欄位","invalid-feedback":"商品說明必填",state:e.state.description}},[r("b-form-textarea",{attrs:{id:"input-description",required:"",rows:"3","max-rows":"6",placeholder:"請輸入商品說明"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),r("b-col",{attrs:{cols:"12"}},[r("img-inputer",{staticClass:"w-100 vh-50",attrs:{accept:"image/*",theme:"light",size:"large","bottom-text":"點選或拖曳圖片以修改","hover-text":"點選或拖曳圖片以修改",placeholder:"點選或拖曳圖片以修改","max-size":1024,"exceed-size-text":"圖片大小不能超過"},model:{value:e.form.image,callback:function(t){e.$set(e.form,"image",t)},expression:"form.image"}})],1),r("b-col",{attrs:{cols:"12"}},[r("b-form-group",{attrs:{label:"上架"}},[r("b-form-radio",{attrs:{value:!0},model:{value:e.form.sell,callback:function(t){e.$set(e.form,"sell",t)},expression:"form.sell"}},[e._v("上架")]),r("b-form-radio",{attrs:{value:!1},model:{value:e.form.sell,callback:function(t){e.$set(e.form,"sell",t)},expression:"form.sell"}},[e._v("下架")])],1)],1)],1)],1)],1)],1)],1)])},n=[],i=r("5530"),o=r("1da1"),s=(r("96cf"),r("b0c0"),r("e9c4"),r("a4d3"),r("e01a"),r("1393"),r("a434"),{data:function(){return{fields:[{key:"image",label:"圖片"},{key:"name",label:"名稱"},{key:"price",label:"價格"},{key:"category",label:"分類"},{key:"description",label:"詳密說明"},{key:"sell",label:"使否上架"},{key:"action",label:"編輯"}],products:[],modalSubmitting:!1,form:{name:"",price:null,description:"",image:null,sell:!1,category:{big:"",small:""},_id:"",index:-1},categories:{"乾燥花":["乾燥花束","乾燥花盆栽","玻璃花盅"],"婚禮系列":["捧花","花圈","婚禮布置"],"乾燥花飾品":["耳環","手鍊"]}}},computed:{state:function(){return{name:0!==this.form.name.length||null,price:null===this.form.price?null:this.form.price>0,category:0!==this.form.category.length||null}}},methods:{submitModal:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n,o,s,l,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.preventDefault(),t.state.name&&t.state.price&&t.state.category){r.next=4;break}return t.$swal({icon:"error",title:"錯誤",text:"缺少必填欄位"}),r.abrupt("return");case 4:for(n in t.modalSubmitting=!0,a=new FormData,t.form)"category"===n?a.append(n,JSON.stringify(t.form[n])):"_id"!==n&&a.append(n,t.form[n]);if(r.prev=7,0!==t.form._id.length){r.next=16;break}return r.next=11,t.api.post("/products",a,{headers:{authorization:"Bearer "+t.user.token}});case 11:o=r.sent,s=o.data,t.products.push(s.result),r.next=23;break;case 16:return r.next=18,t.api.patch("/products/"+t.form._id,a,{headers:{authorization:"Bearer "+t.user.token}});case 18:l=r.sent,c=l.data,t.products[t.form.index]=Object(i["a"])(Object(i["a"])({},t.form),{},{image:c.result.image}),t.$refs.table.refresh(),console.log(c.result);case 23:t.$bvModal.hide("modal-product"),r.next=30;break;case 26:r.prev=26,r.t0=r["catch"](7),console.log(r.t0),t.$swal({icon:"error",title:"錯誤",text:r.t0.response.data.message});case 30:t.modalSubmitting=!1;case 31:case"end":return r.stop()}}),r,null,[[7,26]])})))()},resetForm:function(e){this.modalSubmitting?e.preventDefault():this.form={name:"",price:0,description:"",image:null,sell:!1,category:{big:"",small:""},_id:"",index:-1}},editProduct:function(e){this.form={name:this.products[e].name,price:this.products[e].price,description:this.products[e].description,image:null,sell:this.products[e].sell,category:this.products[e].category,_id:this.products[e]._id,index:e},console.log(this.form.category.big),this.$bvModal.show("modal-product")},delProduct:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t.api.delete("/products/"+e,{headers:{authorization:"Bearer "+t.user.token}});case 3:t.$swal({icon:"success",title:"成功",text:"刪除商品成功"}),t.products.splice(t.form.index,1),r.next=11;break;case 7:r.prev=7,r.t0=r["catch"](0),console.log(r.t0),t.$swal({icon:"error",title:"錯誤",text:"刪除商品失敗"});case 11:case"end":return r.stop()}}),r,null,[[0,7]])})))()}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.get("/products/all",{headers:{authorization:"Bearer"+e.user.token}});case 3:r=t.sent,a=r.data,e.products=a.result,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$swal({icon:"error",title:"錯誤",text:"取得商品失敗"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()}}),l=s,c=r("2877"),u=Object(c["a"])(l,a,n,!1,null,null,null);t["default"]=u.exports},af03:function(e,t,r){var a=r("d039");e.exports=function(e){return a((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},b0c0:function(e,t,r){var a=r("83ab"),n=r("5e77").EXISTS,i=r("e330"),o=r("9bf2").f,s=Function.prototype,l=i(s.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,u=i(c.exec),d="name";a&&!n&&o(s,d,{configurable:!0,get:function(){try{return u(c,l(this))[1]}catch(e){return""}}})},e01a:function(e,t,r){"use strict";var a=r("23e7"),n=r("83ab"),i=r("da84"),o=r("e330"),s=r("1a2d"),l=r("1626"),c=r("3a9b"),u=r("577e"),d=r("9bf2").f,f=r("e893"),m=i.Symbol,p=m&&m.prototype;if(n&&l(m)&&(!("description"in p)||void 0!==m().description)){var b={},g=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:u(arguments[0]),t=c(p,this)?new m(e):void 0===e?m():m(e);return""===e&&(b[t]=!0),t};f(g,m),g.prototype=p,p.constructor=g;var v="Symbol(test)"==String(m("test")),h=o(p.toString),x=o(p.valueOf),y=/^Symbol\((.*)\)[^)]+$/,k=o("".replace),w=o("".slice);d(p,"description",{configurable:!0,get:function(){var e=x(this),t=h(e);if(s(b,e))return"";var r=v?w(t,7,-1):k(t,y,"$1");return""===r?void 0:r}}),a({global:!0,forced:!0},{Symbol:g})}},e9c4:function(e,t,r){var a=r("23e7"),n=r("da84"),i=r("d066"),o=r("2ba4"),s=r("e330"),l=r("d039"),c=n.Array,u=i("JSON","stringify"),d=s(/./.exec),f=s("".charAt),m=s("".charCodeAt),p=s("".replace),b=s(1..toString),g=/[\uD800-\uDFFF]/g,v=/^[\uD800-\uDBFF]$/,h=/^[\uDC00-\uDFFF]$/,x=function(e,t,r){var a=f(r,t-1),n=f(r,t+1);return d(v,e)&&!d(h,n)||d(h,e)&&!d(v,a)?"\\u"+b(m(e,0),16):e},y=l((function(){return'"\\udf06\\ud834"'!==u("\udf06\ud834")||'"\\udead"'!==u("\udead")}));u&&a({target:"JSON",stat:!0,forced:y},{stringify:function(e,t,r){for(var a=0,n=arguments.length,i=c(n);a<n;a++)i[a]=arguments[a];var s=o(u,null,i);return"string"==typeof s?p(s,g,x):s}})},ec5c:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mt-5"},[r("b-table",{attrs:{items:e.orders,fields:e.fields,"head-variant":"light"},scopedSlots:e._u([{key:"cell(user)",fn:function(t){return[e._v(" "+e._s(t.item.user.email)+" ")]}},{key:"cell(date)",fn:function(t){return[e._v(" "+e._s(new Date(t.item.date).toLocaleString("zh-tw"))+" ")]}},{key:"cell(products)",fn:function(t){return[r("ul",e._l(t.item.products,(function(t){return r("li",{key:t._id,staticStyle:{"list-style":"none"}},[e._v(" "+e._s(t.product.name)+" X "+e._s(t.quantity)+" ")])})),0)]}}])})],1)},n=[],i=r("1da1"),o=(r("96cf"),{data:function(){return{orders:[],fields:[{key:"_id",label:"單號"},{key:"user",label:"使用者"},{key:"date",label:"日期"},{key:"products",label:"商品"}]}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.api.get("/orders/all",{headers:{authorization:"Bearer "+e.user.token}});case 3:r=t.sent,a=r.data,e.orders=a.result,console.log(e.orders),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$swal({icon:"error",title:"失敗",text:"取得訂單失敗"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}),s=o,l=r("2877"),c=Object(l["a"])(s,a,n,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=admin.a3e85b4a.js.map